<!DOCTYPE html>// this is a test thing

<html>

<head>

    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>

</head>

<body>

    <script>

    var config = {
        type: Phaser.AUTO,
        width: 1920,
        height: 1080,
        physics: {
            default: 'arcade',
        },

        scene: {
            preload: preload,
            create: create,
            update: update,
        }

    };

    var game = new Phaser.Game(config);

    //Game Objects
    var platforms;
    var map;
    var player;
    var seacreatures = [];

    //Keyboard controls
    var cursors;
    var keys;
    var space;

    var graphics;

    function preload()
    {
        this.load.image('sky', 'deepblue.png');
        this.load.image('platform', 'platform.png');
        this.load.image('clarinet', 'clarinet.png');


        this.load.atlas('seacreatures', 'spritesheet (1).png', 'spritesheet (2).json');
    }

    function create()
    {
        //Set the background origin to be at (0, 0) or top left corner of the image rather than the center of the image asset
       let background = this.add.tileSprite(0, 0, game.scale.width, game.scale.height, 'sky').setOrigin(0, 0);

        this.anims.create({key: 'squidman', frames: this.anims.generateFrameNames('seacreatures', {prefix: 'player', end: 1, zeroPad: 1}), repeat: -1, frameRate: 10});

       //Create the platforms and the player character set to collide with the platforms
       createPlatforms(this);

       player = new Player(this, 400, 400, 'squid');
       this.physics.add.collider(player, platforms);

       //Set up user input
       cursors = this.input.keyboard.createCursorKeys();
       keys = this.input.keyboard.addKeys('A, D, S, W');

       let squid = new SeaCreature(this, 700, 300, 'seacreatures', 'squidman');



       graphics = this.add.graphics();

        for (var i = 0; i < 100; i++)
        {
            let myItem = new Item(this, Phaser.Math.Between(0, game.scale.width), Phaser.Math.Between(0, game.scale.height-80));
            this.physics.add.collider(myItem, platforms);
        }

    }

    function createPlatforms(scene)
    {
        platforms = scene.physics.add.staticGroup();

        //basePlatform is the floor of the game
        let basePlatform = platforms.create(game.scale.width/2, game.scale.height-30, 'platform');
        basePlatform.setScale(3, 1).refreshBody();

        platforms.create(250, 250, 'platform');
        platforms.create(950, 400, 'platform');
    }

    function update()
    {
        //Player will not move in the x-axis unless a movement key is being pressed
        //player.setVelocityX(0);

        //Player has "drag" on the x-axis meaning they slide a bit after an input
        player.setDragX(1500);
        player.setDragY(1500);
        //Handle player movements
        if (keys.A.isDown)
        {
            player.setVelocityX(-200);
        }
        else if (keys.D.isDown)
        {
            player.setVelocityX(200);
        }
        if (keys.S.isDown)
        {
            player.setVelocityY(200);
        }
        else if (keys.W.isDown)
        {
            player.setVelocityY(-200);
        }
        else
        {
            player.setVelocityY(0)
        }

        //let bounds = player.getBounds();
        //graphics.clear();
        //graphics.lineStyle(1, 0xff0000);
        //graphics.strokeRectShape(bounds);

    }

    class Player extends Phaser.Physics.Arcade.Sprite
    {
        constructor(scene, x, y, spritesheet)
        {
            super(scene, x, y, spritesheet);
            scene.add.existing(this);
            scene.physics.add.existing(this);
            this.setScale(0.5);
            this.setCollideWorldBounds(true);
            this.setGravityY(0);
        }
    }

    class Item extends Phaser.Physics.Arcade.Sprite
    {
        constructor(scene, x, y)
        {
            super(scene, x, y, 'clarinet');
            scene.add.existing(this);
            scene.physics.add.existing(this);
            this.setCollideWorldBounds(true);
            this.setGravityY(0);
        }
    }



    class SeaCreature extends Phaser.Physics.Arcade.Sprite
    {
        constructor(scene, x, y, spritesheet,ani)
        {
            super(scene, x, y, spritesheet);
            scene.add.existing(this);
            scene.physics.add.existing(this);
            this.setScale(0.8);
            this.play(ani);
        }

        addTween(scene, xDist, yDist, time)
        {
            scene.tweens.add({ targets: this, x: xDist, y: yDist, duration: time, ease: 'Sine.easeInOut', repeat: -1, yoyo: true });
        }
    }

    </script>

</body>

</html>
